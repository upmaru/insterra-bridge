syntax = "proto3";

import "responses.proto";

package insterra.protos.configurations;

service Handler {
  rpc Build (Archive.CreateRequest) returns (stream Archive.Customization) {}
  rpc Create (Archive.CreateRequest) returns (Archive.Response) {}
}

message Archive {
  message CreateRequest {
    int32 stack_id = 1 [json_name="stack_id"];
    repeated Customization customizations = 2;
  }

  message Response {
    responses.Status status = 1;
    Archive data = 3;
  }

  message Customization {
    int32 component_id = 1 [json_name="component_id"];
    bytes attributes = 2;
  }

  message File {
    string name = 1;
    string content = 2;
  }

  string id = 1;
  repeated File files = 2;
}



