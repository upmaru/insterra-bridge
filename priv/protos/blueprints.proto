syntax = "proto3";

package insterra.proto.blueprints;

import "descriptors.proto";
import "google/protobuf/any.proto";

service Handler {
  rpc ListStacks(Stack.ListRequest) returns (stream Stack) {}
  rpc ListPresets(Preset.ListRequest) returns (stream Preset) {}
}

message Stack {
  message ListRequest {
    string provider_name = 1 [json_name="provider_name"];
  }

  int32 id = 1;
  string name = 2;
  repeated Preset presets = 3;
}

message Preset {
  message ListRequest {
    repeated int32 category_ids = 1 [json_name="category_ids"];
  }

  int32 id = 1;
  string name = 2;
  map<string, google.protobuf.Any> attributes = 3;
  descriptors.Block block = 4;
}